<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { @apply bg-gray-100 text-gray-900; }
  </style>
</head>
<body>
<header th:fragment="header" class="bg-white shadow-md">
  <nav class="container mx-auto flex justify-between items-center p-4">

    <!-- Логотип по ролям -->
    <div class="text-xl font-bold text-gray-900">
      <a th:href="@{/}" sec:authorize="hasRole('ADMIN')" class="hover:text-blue-600">Админ-панель</a>
      <a th:href="@{/}" sec:authorize="hasRole('MANAGER')" class="hover:text-green-600">Панель менеджера</a>
      <a th:href="@{/}" sec:authorize="hasRole('ENGINEER')" class="hover:text-purple-600">Станции инженера</a>
      <a th:href="@{/}" sec:authorize="isAnonymous()" class="hover:text-gray-600">Гость</a>
    </div>

    <!-- Навигация по ролям -->
    <div class="space-x-4 text-center text-base font-medium">

      <!-- Общая вкладка для инженера и админа -->
      <a th:href="@{/workstations}" class="text-blue-600 hover:text-blue-800"
         sec:authorize="hasAnyRole('ENGINEER', 'ADMIN')">Рабочие станции</a>

      <!-- Менеджер тоже видит рабочие станции -->
      <a th:href="@{/workstations}" class="text-blue-600 hover:text-blue-800"
         sec:authorize="hasRole('MANAGER')">Просмотр станций</a>

      <!-- ПО доступно всем ролям, но только админ может редактировать -->
      <a th:href="@{/software}" class="text-blue-600 hover:text-blue-800"
         sec:authorize="hasAnyRole('ADMIN', 'ENGINEER', 'MANAGER')">Программное обеспечение</a>

    </div>

    <!-- Авторизация -->
    <div>
      <a th:href="@{/login}" class="text-blue-600 hover:text-blue-800"
         sec:authorize="isAnonymous()">Войти</a>

      <span class="text-gray-700" sec:authorize="isAuthenticated()" th:text="${#authentication.name}">username</span>

      <a th:href="@{/logout}" class="text-red-600 hover:text-red-800 ml-3"
         sec:authorize="isAuthenticated()">Выход</a>
    </div>
  </nav>
</header>
</body>
</html>
